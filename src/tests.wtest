import jugador.*
import niveles.*
import objetos.*
import wollok.game.*


describe "Tests de colision del personaje jugador con los objetos del juego" {

	method initialize() {
		game.clear()
		game.addVisual(jugador)
	}

	test "Jugador suma vidas" {
		assert.equals(100, jugador.vida()) // cantidad de vida con la que arranca el jugador
		var vida = creadorDeVidas.nuevoObjeto()
		vida.colisionarCon(jugador)
		assert.equals(200, jugador.vida()) // el jugador colisiono con una vida y ahora sumo a 200 de vida
	}

	test "Jugador atrapa dos monedas" {
		assert.that(jugador.monedasAtrapadas().isEmpty()) // cantidad de vida con la que arranca el jugador
		var moneda1 = creadorDeMonedas.nuevoObjeto()
		var moneda2 = creadorDeMonedas.nuevoObjeto()
		moneda1.colisionarCon(jugador)
		moneda2.colisionarCon(jugador)
		assert.equals(2, jugador.monedasAtrapadas().size()) // el jugador colisiono con una vida y ahora sumo a 200 de vida
	}
	
	test "Jugador atrapa un hielo, se congela y no se puede mover"{
		var hielo = creadorDeHielos.nuevoObjeto()
		hielo.colisionarCon(jugador) 
		// al colisinar, el jugador no puede moverse ni saltar
		assert.throwsException({jugador.moverDerecha()})
		assert.throwsException({jugador.moverIzquierda()})
		assert.throwsException({jugador.saltar()})
	}
	
	test "Jugador colisiona con una Maza y pierde"{
		var maza = creadorDeMazas.nuevoObjeto()
		maza.colisionarCon(jugador)
		assert.equals(perdedor, jugador.estadoDeJugador())
	}
	
	
	test "hola"{

	}
	
}

